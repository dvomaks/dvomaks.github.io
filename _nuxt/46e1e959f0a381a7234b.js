(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{167:function(t,e,a){},295:function(t,e,a){"use strict";var i=a(167);a.n(i).a},297:function(t,e,a){"use strict";a.r(e);a(39);var i=a(36),s=a.n(i),n={name:null,email:null,company_id:null},o=[{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Company",value:"company.name"},{text:"Actions",value:"name",sortable:!1}],l={name:"index",data:function(){return{entity:"user",alert:!0,formDialog:!1,editedIndex:-1,editedItem:Object.assign({},n),defaultItem:Object.assign({},n),tableLoader:!0,headers:o,items:[],companies:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New":"Edit"}},watch:{formDialog:function(t){t||this.close()}},created:function(){var t=this;s.a.all([s.a.get("api/".concat(this.entity)),s.a.get("api/company")]).then(s.a.spread(function(e,a){t.items=e.data,t.companies=a.data,t.tableLoader=!1}))},methods:{editItem:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.formDialog=!0},deleteItem:function(t){var e=this,a=this.items.indexOf(t);confirm("Are you sure you want to delete this item?")&&(this.tableLoader=!0,s.a.delete("api/".concat(this.entity,"/").concat(t.id)).then(function(){e.items.splice(a,1),e.tableLoader=!1}))},close:function(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.formDialog=!1},save:function(){var t=this;if(this.tableLoader=!0,this.editedIndex>-1){var e=this.items[this.editedIndex];s.a.put("api/".concat(this.entity,"/").concat(e.id),this.editedItem).then(function(a){Object.assign(e,a.data),t.tableLoader=!1}).catch(function(e){console.log(e),422===e.response.status&&t.showFormErrors(e.response.data.errors),t.tableLoader=!1})}else s.a.post("api/".concat(this.entity),this.editedItem).then(function(e){var a=e.data;t.items.push(a),t.tableLoader=!1}).catch(function(e){console.log(e.response),422===e.response.status&&t.showFormErrors(e.response.data.errors),t.tableLoader=!1});this.close()},showFormErrors:function(t){for(var e in t)this.$toast.error(t[e][0])}}},r=(a(295),a(15)),d=Object(r.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",[a("v-flex",[a("v-toolbar",{attrs:{color:"white"}},[a("v-toolbar-title",[t._v("User CRUD")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"360","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.formDialog,callback:function(e){t.formDialog=e},expression:"formDialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Add\n        ")]),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Name"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Email"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:t.companies,"return-object":!1,"item-value":"id","item-text":"name",label:"Company"},model:{value:t.editedItem.company_id,callback:function(e){t.$set(t.editedItem,"company_id",e)},expression:"editedItem.company_id"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancel\n            ")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.save}},[t._v("Save\n            ")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-5",attrs:{headers:t.headers,items:t.items,loading:t.tableLoader},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.name))]),t._v(" "),a("td",[t._v(t._s(e.item.email))]),t._v(" "),a("td",[t._v(t._s(e.item.company.name))]),t._v(" "),a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n            edit\n          ")]),t._v(" "),a("v-icon",{attrs:{small:""},on:{click:function(a){t.deleteItem(e.item)}}},[t._v("\n            delete\n          ")])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)},[],!1,null,"3e9e02ed",null);d.options.__file="index.vue";e.default=d.exports}}]);